/**
 * @module     local_deepler/deepler
 * @file       amd/src/local/api.js
 * @copyright  2025 Bruno Baudry <bruno.baudry@bfh.ch>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_deepler/local/api",["core/log","core/ajax","./utils","./customevents"],((Log,Ajax,Utils,Events)=>{const TR_DB_FAILED="onTranslationUpdateFailed";return{TR_DB_SUCCESS:"onTranslationUpdateSuccess",TR_DB_FAILED:TR_DB_FAILED,DEEPL_SUCCESS:"onDeeplUpdateSuccess",DEEPL_FAILED:"onDeeplUpdateFailed",callApi:(methodname,args)=>Ajax.call([{methodname:methodname,args:args}]),updateTranslationsInDb:(data,userid)=>{Ajax.call([{methodname:"local_deepler_update_translation",args:{data:data,userid:userid},done:response=>{1===response.length&&response[0].error&&""===response[0].keyid?Events.emit(TR_DB_FAILED,response[0].error):Events.emit("onTranslationUpdateSuccess",response)},fail:(jqXHR,status,error)=>{Events.emit(TR_DB_FAILED,error)}}])},translate:(data,options)=>{Ajax.call([{methodname:"local_deepler_get_translation",args:{translations:data,options:options},done:response=>{Events.emit("onDeeplUpdateSuccess",response)},fail:(jqXHR,status,error)=>{Log.error(jqXHR),Log.error(status),Log.error(error),Events.emit("onDeeplUpdateFailed",status,error)}}])}}}));

//# sourceMappingURL=api.min.js.map