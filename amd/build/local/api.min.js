define(["core/log","core/ajax","./utils","./customevents"],(i,l,e,t)=>{let s="onDbUpdateSuccess",a="onGlossaryEntriesSuccess",o="onGlossaryEntriesFailed",n="onDbGlossaryUpdateSuccess",d="onDbUpdateFailed",_="onDbGlossaryUpdateFailed",p="onDbGlossaryUpdateAllFailed",g="onDeeplTrSuccess",S="onDeeplRfSuccess",c="onDeeplTrFailed",u="onDeeplRfFailed";let E=(e,s,r,o)=>{l.call([{methodname:s,args:e,done:e=>{t.emit(r,e)},fail:(e,r,a)=>{i.debug(s+" api/translate/fail::jqXHR"),i.debug(e),t.emit(o,e.debuginfo??e.message??a??e.errorcode??"")}}])};return{APP_VERSION:"",GLOSSARY_ENTRIES_SUCCESS:a,GLOSSARY_ENTRIES_FAILED:o,GLOSSARY_DB_SUCCESS:n,GLOSSARY_DB_FAILED:_,GLOSSARY_DB_ALL_FAILED:p,TR_DB_SUCCESS:s,TR_DB_FAILED:d,DEEPL_SUCCESS:g,DEEPL_RF_SUCCESS:S,DEEPL_FAILED:c,DEEPL_RF_FAILED:u,getGlossariesEntries:(e,r)=>{l.call([{methodname:"local_deepler_get_glossary_entries",args:{glossaryid:e,version:r},done:e=>{t.emit(a,e)},fail:(e,r,a)=>{i.error("api/getGlossariesEntries/fail::jqXHR"),i.error(e),t.emit(o,e.debuginfo??e.message??e.errorcode??r??a)}}])},updateGlossariesUsage:e=>{l.call([{methodname:"local_deepler_update_glossary",args:{glossaryids:e},done:e=>{e.forEach(e=>{"error"===e.sattus?t.emit(_,e):t.emit(n,e)})},fail:(e,r,a)=>{i.error("api/updateGlossariesUsage/fail::jqXHR"),i.error(e),t.emit(p,e.debuginfo??e.message??e.errorcode??r??a)}}])},updateGlossariesVisibility:(e,r)=>{l.call([{methodname:"local_deepler_update_glossary_visibility",args:{glossaryid:e,shared:r},done:e=>{t.emit(n,e)},fail:(e,r,a)=>{i.error("api/updateGlossariesVisibility/fail::jqXHR"),i.error(e),t.emit(_,e.debuginfo??e.message??e.errorcode??r??a)}}])},updateTranslationsInDb:(e,r,a)=>{l.call([{methodname:"local_deepler_update_translation",args:{data:e,userid:r,courseid:a,action:"update"},done:e=>{1===e.length&&e[0].error&&""===e[0].keyid?(i.warn("api/updateTranslationsInDb/done::response has errors"),t.emit(d,e[0].error)):t.emit(s,e)},fail:(e,r,a)=>{i.error("api/updateTranslationsInDb/fail::jqXHR"),i.error(e),t.emit(d,e.debuginfo??e.message??e.errorcode??r??a)}}])},translate:(e,r,a)=>{e={translations:e,options:r,version:a};E(e,"local_deepler_get_translation",g,c)},rephrase:(e,r,a)=>{e={rephrasings:e,options:r,version:a};E(e,"local_deepler_get_rephrase",S,u)}}});