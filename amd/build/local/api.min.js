/**
 * @module     local_deepler/deepler
 * @file       amd/src/local/api.js
 * @copyright  2025 Bruno Baudry <bruno.baudry@bfh.ch>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_deepler/local/api",["core/log","core/ajax","./utils","./customevents"],((Log,Ajax,Utils,Events)=>{const deeplService=(args,endPoint,successEvent,failedEvent)=>{Ajax.call([{methodname:endPoint,args:args,done:response=>{Events.emit(successEvent,response)},fail:(jqXHR,status,error)=>{var _ref4,_ref5;Log.debug("".concat(endPoint," api/translate/fail::jqXHR")),Log.debug(jqXHR),Events.emit(failedEvent,null!=status?status:"",null!==(_ref4=null!==(_ref5=null!=error?error:jqXHR.debuginfo)&&void 0!==_ref5?_ref5:jqXHR.message)&&void 0!==_ref4?_ref4:jqXHR.errorcode)}}])};return{APP_VERSION:"",TR_DB_SUCCESS:"onDbUpdateSuccess",TR_DB_FAILED:"onDbUpdateFailed",DEEPL_SUCCESS:"onDeeplTrSuccess",DEEPL_RF_SUCCESS:"onDeeplRfSuccess",DEEPL_FAILED:"onDeeplTrFailed",DEEPL_RF_FAILED:"onDeeplRfFailed",updateTranslationsInDb:(data,userid,courseid)=>{Ajax.call([{methodname:"local_deepler_update_translation",args:{data:data,userid:userid,courseid:courseid,action:"update"},done:response=>{if(1===response.length&&response[0].error&&""===response[0].keyid)return Log.warn("api/updateTranslationsInDb/done::response has errors"),void Events.emit("onDbUpdateFailed",response[0].error);Events.emit("onDbUpdateSuccess",response)},fail:(jqXHR,status,error)=>{var _ref,_ref2,_ref3;Log.error("api/updateTranslationsInDb/fail::jqXHR"),Log.error(jqXHR),Events.emit("onDbUpdateFailed",null!==(_ref=null!==(_ref2=null!==(_ref3=null!=error?error:jqXHR.debuginfo)&&void 0!==_ref3?_ref3:jqXHR.message)&&void 0!==_ref2?_ref2:jqXHR.errorcode)&&void 0!==_ref?_ref:status)}}])},translate:(data,options,version)=>{deeplService({translations:data,options:options,version:version},"local_deepler_get_translation","onDeeplTrSuccess","onDeeplTrFailed")},rephrase:(data,options,version)=>{deeplService({rephrasings:data,options:options,version:version},"local_deepler_get_rephrase","onDeeplRfSuccess","onDeeplRfFailed")}}}));

//# sourceMappingURL=api.min.js.map