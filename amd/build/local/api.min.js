/**
 * @module     local_deepler/deepler
 * @file       amd/src/local/api.js
 * @copyright  2025 Bruno Baudry <bruno.baudry@bfh.ch>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_deepler/local/api",["core/log","core/ajax","./utils","./customevents"],((Log,Ajax,Utils,Events)=>{const TR_DB_FAILED="onTranslationUpdateFailed";return{APP_VERSION:"",TR_DB_SUCCESS:"onTranslationUpdateSuccess",TR_DB_FAILED:TR_DB_FAILED,DEEPL_SUCCESS:"onDeeplUpdateSuccess",DEEPL_FAILED:"onDeeplUpdateFailed",updateTranslationsInDb:(data,userid,courseid)=>{Log.debug("api.updateTranslationsInDb.33"),Log.debug(data),Log.debug(courseid),Ajax.call([{methodname:"local_deepler_update_translation",args:{data:data,userid:userid,courseid:courseid},done:response=>{if(Log.info("api/updateTranslationsInDb/done::response"),Log.info(response),1===response.length&&response[0].error&&""===response[0].keyid)return Log.warn("api/updateTranslationsInDb/done::response has errors"),void Events.emit(TR_DB_FAILED,response[0].error);Events.emit("onTranslationUpdateSuccess",response)},fail:(jqXHR,status,error)=>{var _ref,_ref2,_ref3;Log.error("api/updateTranslationsInDb/fail::jqXHR"),Log.error(jqXHR),Events.emit(TR_DB_FAILED,null!==(_ref=null!==(_ref2=null!==(_ref3=null!=error?error:jqXHR.debuginfo)&&void 0!==_ref3?_ref3:jqXHR.message)&&void 0!==_ref2?_ref2:jqXHR.errorcode)&&void 0!==_ref?_ref:status)}}])},translate:(data,options,version)=>{const args={translations:data,options:options,version:version};Log.info("api/translate > args"),Log.info(args),Ajax.call([{methodname:"local_deepler_get_translation",args:args,done:response=>{Log.info("api/translate/done::response"),Log.info(response),Events.emit("onDeeplUpdateSuccess",response)},fail:(jqXHR,status,error)=>{var _ref4,_ref5;Log.error("api/translate/fail::jqXHR"),Log.error(jqXHR),Events.emit("onDeeplUpdateFailed",null!=status?status:"",null!==(_ref4=null!==(_ref5=null!=error?error:jqXHR.debuginfo)&&void 0!==_ref5?_ref5:jqXHR.message)&&void 0!==_ref4?_ref4:jqXHR.errorcode)}}])}}}));

//# sourceMappingURL=api.min.js.map