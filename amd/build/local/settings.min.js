/**
 *  description here.
 *
 * @module     'local_deepler'; // Full name of the plugin (used for diagnostics)./local/settings
 * @copyright  2025 Bruno Baudry <bruno.baudry@bfh.ch>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_deepler/local/settings",["./selectors","./utils","core/log"],((Selectors,Utils,Log)=>{let config,settingsUI={};const setOptionFromCookie=value=>{let optionToSelect=Utils.domQuery('option[value="'.concat(value,'"]'));optionToSelect&&(optionToSelect.selected=!0)};return{init:cfg=>{config=cfg,(()=>{try{settingsUI[Selectors.deepl.glossaryId]=Utils.domQuery(Selectors.deepl.glossaryId),settingsUI[Selectors.deepl.context]=Utils.domQuery(Selectors.deepl.context),settingsUI[Selectors.deepl.formality]=Utils.domQuery(Selectors.deepl.formality),settingsUI[Selectors.deepl.modelType]=Utils.domQuery(Selectors.deepl.modelType),settingsUI[Selectors.deepl.ignoreTags]=Utils.domQuery(Selectors.deepl.ignoreTags),settingsUI[Selectors.deepl.nonSplittingTags]=Utils.domQuery(Selectors.deepl.nonSplittingTags),settingsUI[Selectors.deepl.outlineDetection]=Utils.domQuery(Selectors.deepl.outlineDetection),settingsUI[Selectors.deepl.preserveFormatting]=Utils.domQuery(Selectors.deepl.preserveFormatting),settingsUI[Selectors.deepl.splitSentences]=Utils.domQuery(Selectors.deepl.splitSentences),settingsUI[Selectors.deepl.splittingTags]=Utils.domQuery(Selectors.deepl.splittingTags),settingsUI[Selectors.deepl.tagHandling]=Utils.domQuery(Selectors.deepl.tagHandling),config.isfree||(settingsUI[Selectors.deepl.toneorstyle]=Utils.domQuery(Selectors.deepl.toneorstyle)),settingsUI[Selectors.actions.escapeLatex]=Utils.domQuery(Selectors.actions.escapeLatex),settingsUI[Selectors.actions.escapePre]=Utils.domQuery(Selectors.actions.escapePre)}catch(e){config.debug&&Log.error(e.message)}})(),(()=>{if(!config.targetlang)return;const glossaryCookie=Utils.getCookie(config),newCookie=Utils.getEncodedCookie(config);if(null!==newCookie){const settingsCookie=JSON.parse(newCookie);for(const selector in settingsUI)if(void 0!==settingsCookie[selector])switch(settingsUI[selector].type){case"select-one":setOptionFromCookie(settingsCookie[selector]);break;case"checkbox":settingsUI[selector].checked=settingsCookie[selector];break;case"radio":Utils.domQuery(selector+'[value="'.concat(settingsCookie[selector],'"]')).checked=!0;break;default:settingsUI[selector].value=settingsCookie[selector]}}null!==glossaryCookie&&(settingsUI[Selectors.deepl.glossaryId].value=glossaryCookie)})()},getValue:selector=>settingsUI[selector].value,prepareSettingsAndCookieValues:()=>{let settings={},cookie={};for(const selector in settingsUI)if(null===settingsUI[selector])Log.warn("prepareSettingsAndCookieValues. Could not find selector ".concat(selector)),Log.warn(settingsUI);else switch(settingsUI[selector].type){case"select-one":cookie[selector]=settingsUI[selector].value,settings[selector]=settingsUI[selector].value;break;case"textarea":cookie[selector]=settingsUI[selector].value,settings[selector]=Utils.toJsonArray(cookie[selector]);break;case"checkbox":selector===Selectors.deepl.tagHandling?(cookie[selector]=settingsUI[selector].checked,settings[selector]=settingsUI[selector].checked?"html":"xml"):settings[selector]=cookie[selector]=settingsUI[selector].checked;break;case"radio":cookie[selector]=Utils.domQuery(Selectors.actions.radioValues.replace("<RADIO>",selector)).value,settings[selector]=cookie[selector];break;default:settings[selector]=cookie[selector]=settingsUI[selector].value}return[cookie,settings]}}}));

//# sourceMappingURL=settings.min.js.map