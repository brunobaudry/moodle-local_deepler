define(["./local/ui_deepler","core/log","jquery"],(i,r,l)=>{let d={NONE:0,MINIMAL:5,NORMAL:15,ALL:30719,DEVELOPER:32767};return{init:e=>{var t={[d.NONE]:5,[d.MINIMAL]:3,[d.NORMAL]:2,[d.ALL]:1,[d.DEVELOPER]:0}[e.debug]??5;r.setConfig({level:t});let n=0,o=!1,a=()=>{var e=document.getElementById("local_deepler_preloaderModal");e&&(e.classList.remove("show","d-block"),e.classList.add("d-none")),o=!0};(()=>{let t=XMLHttpRequest.prototype.open,e=!0;try{e=t.toString().includes("[native code]")}catch(e){return r.log("unable to determine if native"),!1}return e?(r.log("useXMLHttpRequestTracking"),XMLHttpRequest.prototype.open=function(...e){n++,o=!1,this.addEventListener("readystatechange",function(){4!==this.readyState||0!==--n||o||(o=!0,a())},!1),t.apply(this,e)},r.log("Using custom XMLHttpRequest tracking."),!0):(r.log("Theme already overrides XMLHttpRequest. Skipping custom tracking."),!1)})()||(l(document).ajaxStart(function(){n++,o=!1,r.log("ajaxStart",n,o)}),l(document).ajaxStop(function(){n=0,o||(o=!0,r.log("ajaxStop",n,o),a())}),r.log("Using jQuery AJAX tracking.")),window.addEventListener("load",i.init(e))}}});