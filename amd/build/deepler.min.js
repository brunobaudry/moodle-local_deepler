define(["core/log","jquery","./local/translation","./local/scrollspy","./local/eventHandlers","./local/uiHelpers","./local/settings"],(i,r,s,c,d,p,u)=>{let g={NONE:0,MINIMAL:5,NORMAL:15,ALL:30719,DEVELOPER:32767},L;return{init:e=>{L=e;var t={[g.NONE]:5,[g.MINIMAL]:3,[g.NORMAL]:2,[g.ALL]:1,[g.DEVELOPER]:0}[L.debug]??5;i.setConfig({level:t});let n=0,o=!1,l=document.getElementById("local_deepler_preloaderModal"),a=()=>{l&&(l.classList.remove("show","d-block"),l.classList.add("d-none")),o=!0};(()=>{let t=XMLHttpRequest.prototype.open,e=!0;try{e=t.toString().includes("[native code]")}catch(e){return i.log("unable to determine if native"),!1}return e?(i.log("useXMLHttpRequestTracking"),XMLHttpRequest.prototype.open=function(...e){n++,o=!1,this.addEventListener("readystatechange",function(){4!==this.readyState||0!==--n||o||(o=!0,a())},!1),t.apply(this,e)},i.log("Using custom XMLHttpRequest tracking."),!0):(i.log("Theme already overrides XMLHttpRequest. Skipping custom tracking."),!1)})()||(r(document).ajaxStart(function(){n++,o=!1,i.log("ajaxStart",n,o)}),r(document).ajaxStop(function(){n=0,o||(o=!0,i.log("ajaxStop",n,o),a())}),i.log("Using jQuery AJAX tracking.")),window.addEventListener("load",(t=e,c.init(".local_deepler__form","#local_deepler-scrollspy",{highestLevel:3,fadingDistance:60,offsetEndOfScope:1,offsetTop:100,crumbsmaxlen:t.crumbsmaxlen}),p.init(t),u.init(t),s.init(t),d.init(t),void i.info(t)))}}});