define(["./local/ui_deepler","core/log","jquery"],(r,i,l)=>{let d={NONE:0,MINIMAL:5,NORMAL:15,ALL:30719,DEVELOPER:32767};return{init:e=>{var t={[d.NONE]:5,[d.MINIMAL]:3,[d.NORMAL]:2,[d.ALL]:1,[d.DEVELOPER]:0}[e.debug]??5;i.setConfig({level:t});let a=0,n=!1,o=()=>{var e=document.getElementById("local_deepler_preloaderModal");e&&(e.classList.remove("show","d-block"),e.classList.add("d-none")),n=!0};(()=>{let t=XMLHttpRequest.prototype.open,e=!0;try{e=t.toString().includes("[native code]")}catch(e){return i.log("unable to determine if native"),!1}return e?(i.log("useXMLHttpRequestTracking"),XMLHttpRequest.prototype.open=function(...e){a++,n=!1,this.addEventListener("readystatechange",function(){i.log("readystatechange",this.readyState),4===this.readyState&&(a--,i.log("readystatechange",a,n),0!==a||n||(n=!0,o()))},!1),t.apply(this,e)},i.log("Using custom XMLHttpRequest tracking."),!0):(i.log("Theme already overrides XMLHttpRequest. Skipping custom tracking."),!1)})()||(l(document).ajaxStart(function(){a++,n=!1,i.log("ajaxStart",a,n)}),l(document).ajaxStop(function(){a=0,n||(n=!0,i.log("ajaxStop",a,n),o())}),i.log("Using jQuery AJAX tracking.")),window.addEventListener("load",r.init(e))}}});